{"ast":null,"code":"import _regeneratorRuntime from \"/home/johnatan/MP/mp-app/ap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/johnatan/MP/mp-app/ap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"/home/johnatan/MP/mp-app/ap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/johnatan/MP/mp-app/ap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/home/johnatan/MP/mp-app/ap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nvar _this = this,\n    _jsxFileName = \"/home/johnatan/MP/mp-app/ap/src/app/components/chat-box-2/Chatbox.jsx\";\n\nvar _excluded = [\"palette\"];\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { ChatAvatar } from 'app/components';\nimport { IconButton, Icon, Divider, TextField, Avatar } from '@material-ui/core';\nimport ScrollBar from 'react-perfect-scrollbar'; // import { getChatRoomByContactId } from \"app/views/chat-box/ChatService\";\n\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (_ref) {\n  var palette = _ref.palette,\n      theme = _objectWithoutProperties(_ref, _excluded);\n\n  return {\n    lightBG: {\n      background: 'rgba(var(--body), 0.03)'\n    },\n    dividerBG: {\n      background: 'rgba(var(--body), 0.15)'\n    }\n  };\n}); // for previewing bot message\n\nvar globalMessageList = [];\n\nvar Chatbox = function Chatbox(_ref2) {\n  var togglePopup = _ref2.togglePopup;\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      isAlive = _useState2[0],\n      setIsAlive = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      message = _useState4[0],\n      setMessage = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      messageList = _useState6[0],\n      setMessageList = _useState6[1];\n\n  var currentUserId = '7863a6802ez0e277a0f98534';\n  var chatBottomRef = document.querySelector('#chat-scroll');\n  var classes = useStyles();\n\n  var sendMessageOnEnter = function sendMessageOnEnter(event) {\n    if (event.key === 'Enter' && !event.shiftKey) {\n      var tempMessage = message.trim();\n\n      if (tempMessage !== '') {\n        var tempList = _toConsumableArray(messageList);\n\n        var messageObject = {\n          text: tempMessage,\n          contactId: currentUserId\n        };\n        tempList.push(messageObject);\n        globalMessageList.push(messageObject);\n        if (isAlive) setMessageList(tempList);\n        dummyReply();\n      }\n\n      setMessage('');\n    }\n  };\n\n  var dummyReply = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setTimeout(function () {\n                var tempList = _toConsumableArray(messageList);\n\n                var messageObject = {\n                  text: 'Good to hear from you. enjoy!!!',\n                  contactId: 'opponents contact id',\n                  avatar: '/assets/images/faces/13.jpg',\n                  name: 'Frank Powell'\n                };\n                tempList.push(messageObject);\n                globalMessageList.push(messageObject);\n                if (isAlive) setMessageList(globalMessageList);\n              }, 2000);\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function dummyReply() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var scrollToBottom = useCallback(function () {\n    if (chatBottomRef) {\n      chatBottomRef.scrollTo({\n        top: chatBottomRef.scrollHeight,\n        behavior: 'smooth'\n      });\n    }\n  }, [chatBottomRef]);\n  useEffect(function () {\n    if (isAlive) {\n      setMessageList([{\n        contactId: '323sa680b3249760ea21rt47',\n        text: 'Do you ever find yourself falling into the “discount trap?”',\n        time: '2018-02-10T08:45:28.291Z',\n        id: '323sa680b3249760ea21rt47',\n        name: 'Frank Powell',\n        avatar: '/assets/images/faces/13.jpg',\n        status: 'online',\n        mood: ''\n      }, {\n        contactId: '7863a6802ez0e277a0f98534',\n        text: 'Giving away your knowledge or product just to gain clients?',\n        time: '2018-02-10T08:45:28.291Z',\n        id: '7863a6802ez0e277a0f98534',\n        name: 'John Doe',\n        avatar: '/assets/images/face-1.jpg',\n        status: 'online',\n        mood: ''\n      }, {\n        contactId: '323sa680b3249760ea21rt47',\n        text: 'Yes',\n        time: '2018-02-10T08:45:28.291Z',\n        id: '323sa680b3249760ea21rt47',\n        name: 'Frank Powell',\n        avatar: '/assets/images/faces/13.jpg',\n        status: 'online',\n        mood: ''\n      }, {\n        contactId: '7863a6802ez0e277a0f98534',\n        text: 'Don’t feel bad. It happens to a lot of us',\n        time: '2018-02-10T08:45:28.291Z',\n        id: '7863a6802ez0e277a0f98534',\n        name: 'John Doe',\n        avatar: '/assets/images/face-1.jpg',\n        status: 'online',\n        mood: ''\n      }, {\n        contactId: '323sa680b3249760ea21rt47',\n        text: 'Do you ever find yourself falling into the “discount trap?”',\n        time: '2018-02-10T08:45:28.291Z',\n        id: '323sa680b3249760ea21rt47',\n        name: 'Frank Powell',\n        avatar: '/assets/images/faces/13.jpg',\n        status: 'online',\n        mood: ''\n      }, {\n        contactId: '7863a6802ez0e277a0f98534',\n        text: 'Giving away your knowledge or product just to gain clients?',\n        time: '2018-02-10T08:45:28.291Z',\n        id: '7863a6802ez0e277a0f98534',\n        name: 'John Doe',\n        avatar: '/assets/images/face-1.jpg',\n        status: 'online',\n        mood: ''\n      }, {\n        contactId: '323sa680b3249760ea21rt47',\n        text: 'Yes',\n        time: '2018-02-10T08:45:28.291Z',\n        id: '323sa680b3249760ea21rt47',\n        name: 'Frank Powell',\n        avatar: '/assets/images/faces/13.jpg',\n        status: 'online',\n        mood: ''\n      }, {\n        contactId: '7863a6802ez0e277a0f98534',\n        text: 'Don’t feel bad. It happens to a lot of us',\n        time: '2018-02-10T08:45:28.291Z',\n        id: '7863a6802ez0e277a0f98534',\n        name: 'John Doe',\n        avatar: '/assets/images/face-1.jpg',\n        status: 'online',\n        mood: ''\n      }]);\n    } // getChatRoomByContactId(currentUserId, \"323sa680b3249760ea21rt47\").then(\n    //   ({ data }) => {\n    //     if (isAlive) {\n    //       setMessageList(data?.messageList);\n    //     }\n    //   }\n    // );\n\n  }, [isAlive]);\n  useEffect(function () {\n    scrollToBottom();\n    return function () {\n      return setIsAlive(false);\n    };\n  }, [messageList, scrollToBottom]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-column h-full\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: clsx('flex justify-between items-center pl-5 py-3 pr-3', classes.lightBG),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ChatAvatar, {\n    src: \"/assets/images/face-2.jpg\",\n    status: \"online\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ml-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"mt-0 mb-3px text-14\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 25\n    }\n  }, \"Ryan Todd\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-muted font-medium\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 25\n    }\n  }, \"Active\"))), /*#__PURE__*/React.createElement(IconButton, {\n    onClick: togglePopup,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    className: \"text-body\",\n    fontSize: \"small\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 21\n    }\n  }, \"clear\"))), /*#__PURE__*/React.createElement(ScrollBar, {\n    className: \"flex-grow\",\n    id: \"chat-scroll\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 13\n    }\n  }, messageList.map(function (item, ind) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: clsx({\n        'p-5 flex': true,\n        'justify-end': currentUserId === item.contactId\n      }),\n      key: ind,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 21\n      }\n    }, currentUserId !== item.contactId && /*#__PURE__*/React.createElement(Avatar, {\n      src: item.avatar,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ml-3\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 25\n      }\n    }, currentUserId !== item.contactId && /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"mt-0 mb-1 text-14\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 33\n      }\n    }, item.name), /*#__PURE__*/React.createElement(\"div\", {\n      className: clsx('p-2 mb-2 max-w-240 border-radius-4 text-14 whitespace-pre-wrap', classes.lightBG),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 29\n      }\n    }, item.text), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-muted text-13 font-medium\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 29\n      }\n    }, \"1 minute ago\")));\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-5 flex justify-end\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ml-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-2 mb-2 flex justify-end items-center max-w-240 bg-light-gray border-radius-4 text-14\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"w-40\",\n    src: \"/assets/images/laptop-1.png\",\n    alt: \"laptop\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ml-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"mt-0 mb-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 33\n    }\n  }, \"Asus K555LA.png\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-muted font-medium text-13\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 33\n    }\n  }, \"21.5KB\"))), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-muted text-13 font-medium\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 25\n    }\n  }, \"1 minute ago\")))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Divider, {\n    className: classes.dividerBG,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    placeholder: \"Type here ...\",\n    multiline: true,\n    rowsMax: 4,\n    fullWidth: true,\n    InputProps: {\n      disableUnderline: true,\n      endAdornment: /*#__PURE__*/React.createElement(\"div\", {\n        className: \"flex\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(IconButton, {\n        size: \"small\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        className: \"text-body\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 37\n        }\n      }, \"tag_faces\")), /*#__PURE__*/React.createElement(IconButton, {\n        size: \"small\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        className: \"text-body\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 37\n        }\n      }, \"attachment\"))),\n      classes: {\n        root: 'pl-5 pr-3 py-3 text-body'\n      }\n    },\n    value: message,\n    onChange: function onChange(e) {\n      return setMessage(e.target.value);\n    },\n    onKeyUp: sendMessageOnEnter,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 17\n    }\n  })));\n};\n\nexport default Chatbox;","map":{"version":3,"sources":["/home/johnatan/MP/mp-app/ap/src/app/components/chat-box-2/Chatbox.jsx"],"names":["React","useState","useEffect","useCallback","ChatAvatar","IconButton","Icon","Divider","TextField","Avatar","ScrollBar","clsx","makeStyles","useStyles","palette","theme","lightBG","background","dividerBG","globalMessageList","Chatbox","togglePopup","isAlive","setIsAlive","message","setMessage","messageList","setMessageList","currentUserId","chatBottomRef","document","querySelector","classes","sendMessageOnEnter","event","key","shiftKey","tempMessage","trim","tempList","messageObject","text","contactId","push","dummyReply","setTimeout","avatar","name","scrollToBottom","scrollTo","top","scrollHeight","behavior","time","id","status","mood","map","item","ind","disableUnderline","endAdornment","root","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react'\nimport { ChatAvatar } from 'app/components'\nimport { IconButton, Icon, Divider, TextField, Avatar } from '@material-ui/core'\nimport ScrollBar from 'react-perfect-scrollbar'\n// import { getChatRoomByContactId } from \"app/views/chat-box/ChatService\";\nimport clsx from 'clsx'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles(({ palette, ...theme }) => ({\n    lightBG: {\n        background: 'rgba(var(--body), 0.03)',\n    },\n    dividerBG: {\n        background: 'rgba(var(--body), 0.15)',\n    },\n}))\n// for previewing bot message\nconst globalMessageList = []\n\nconst Chatbox = ({ togglePopup }) => {\n    const [isAlive, setIsAlive] = useState(true)\n    const [message, setMessage] = useState('')\n    const [messageList, setMessageList] = useState([])\n    const currentUserId = '7863a6802ez0e277a0f98534'\n    const chatBottomRef = document.querySelector('#chat-scroll')\n\n    const classes = useStyles()\n\n    const sendMessageOnEnter = (event) => {\n        if (event.key === 'Enter' && !event.shiftKey) {\n            let tempMessage = message.trim()\n            if (tempMessage !== '') {\n                let tempList = [...messageList]\n                let messageObject = {\n                    text: tempMessage,\n                    contactId: currentUserId,\n                }\n                tempList.push(messageObject)\n                globalMessageList.push(messageObject)\n                if (isAlive) setMessageList(tempList)\n                dummyReply()\n            }\n            setMessage('')\n        }\n    }\n\n    const dummyReply = async () => {\n        setTimeout(() => {\n            let tempList = [...messageList]\n            let messageObject = {\n                text: 'Good to hear from you. enjoy!!!',\n                contactId: 'opponents contact id',\n                avatar: '/assets/images/faces/13.jpg',\n                name: 'Frank Powell',\n            }\n\n            tempList.push(messageObject)\n            globalMessageList.push(messageObject)\n            if (isAlive) setMessageList(globalMessageList)\n        }, 2000)\n    }\n\n    const scrollToBottom = useCallback(() => {\n        if (chatBottomRef) {\n            chatBottomRef.scrollTo({\n                top: chatBottomRef.scrollHeight,\n                behavior: 'smooth',\n            })\n        }\n    }, [chatBottomRef])\n\n    useEffect(() => {\n        if (isAlive) {\n            setMessageList([\n                {\n                    contactId: '323sa680b3249760ea21rt47',\n                    text:\n                        'Do you ever find yourself falling into the “discount trap?”',\n                    time: '2018-02-10T08:45:28.291Z',\n                    id: '323sa680b3249760ea21rt47',\n                    name: 'Frank Powell',\n                    avatar: '/assets/images/faces/13.jpg',\n                    status: 'online',\n                    mood: '',\n                },\n                {\n                    contactId: '7863a6802ez0e277a0f98534',\n                    text:\n                        'Giving away your knowledge or product just to gain clients?',\n                    time: '2018-02-10T08:45:28.291Z',\n                    id: '7863a6802ez0e277a0f98534',\n                    name: 'John Doe',\n                    avatar: '/assets/images/face-1.jpg',\n                    status: 'online',\n                    mood: '',\n                },\n                {\n                    contactId: '323sa680b3249760ea21rt47',\n                    text: 'Yes',\n                    time: '2018-02-10T08:45:28.291Z',\n                    id: '323sa680b3249760ea21rt47',\n                    name: 'Frank Powell',\n                    avatar: '/assets/images/faces/13.jpg',\n                    status: 'online',\n                    mood: '',\n                },\n                {\n                    contactId: '7863a6802ez0e277a0f98534',\n                    text: 'Don’t feel bad. It happens to a lot of us',\n                    time: '2018-02-10T08:45:28.291Z',\n                    id: '7863a6802ez0e277a0f98534',\n                    name: 'John Doe',\n                    avatar: '/assets/images/face-1.jpg',\n                    status: 'online',\n                    mood: '',\n                },\n                {\n                    contactId: '323sa680b3249760ea21rt47',\n                    text:\n                        'Do you ever find yourself falling into the “discount trap?”',\n                    time: '2018-02-10T08:45:28.291Z',\n                    id: '323sa680b3249760ea21rt47',\n                    name: 'Frank Powell',\n                    avatar: '/assets/images/faces/13.jpg',\n                    status: 'online',\n                    mood: '',\n                },\n                {\n                    contactId: '7863a6802ez0e277a0f98534',\n                    text:\n                        'Giving away your knowledge or product just to gain clients?',\n                    time: '2018-02-10T08:45:28.291Z',\n                    id: '7863a6802ez0e277a0f98534',\n                    name: 'John Doe',\n                    avatar: '/assets/images/face-1.jpg',\n                    status: 'online',\n                    mood: '',\n                },\n                {\n                    contactId: '323sa680b3249760ea21rt47',\n                    text: 'Yes',\n                    time: '2018-02-10T08:45:28.291Z',\n                    id: '323sa680b3249760ea21rt47',\n                    name: 'Frank Powell',\n                    avatar: '/assets/images/faces/13.jpg',\n                    status: 'online',\n                    mood: '',\n                },\n                {\n                    contactId: '7863a6802ez0e277a0f98534',\n                    text: 'Don’t feel bad. It happens to a lot of us',\n                    time: '2018-02-10T08:45:28.291Z',\n                    id: '7863a6802ez0e277a0f98534',\n                    name: 'John Doe',\n                    avatar: '/assets/images/face-1.jpg',\n                    status: 'online',\n                    mood: '',\n                },\n            ])\n        }\n        // getChatRoomByContactId(currentUserId, \"323sa680b3249760ea21rt47\").then(\n        //   ({ data }) => {\n        //     if (isAlive) {\n        //       setMessageList(data?.messageList);\n        //     }\n        //   }\n        // );\n    }, [isAlive])\n\n    useEffect(() => {\n        scrollToBottom()\n        return () => setIsAlive(false)\n    }, [messageList, scrollToBottom])\n\n    return (\n        <div className=\"flex-column h-full\">\n            <div\n                className={clsx(\n                    'flex justify-between items-center pl-5 py-3 pr-3',\n                    classes.lightBG\n                )}\n            >\n                <div className=\"flex items-center\">\n                    <ChatAvatar\n                        src=\"/assets/images/face-2.jpg\"\n                        status=\"online\"\n                    />\n                    <div className=\"ml-3\">\n                        <h5 className=\"mt-0 mb-3px text-14\">Ryan Todd</h5>\n                        <span className=\"text-muted font-medium\">Active</span>\n                    </div>\n                </div>\n                <IconButton onClick={togglePopup}>\n                    <Icon className=\"text-body\" fontSize=\"small\">\n                        clear\n                    </Icon>\n                </IconButton>\n            </div>\n            <ScrollBar className=\"flex-grow\" id=\"chat-scroll\">\n                {messageList.map((item, ind) => (\n                    <div\n                        className={clsx({\n                            'p-5 flex': true,\n                            'justify-end': currentUserId === item.contactId,\n                        })}\n                        key={ind}\n                    >\n                        {currentUserId !== item.contactId && (\n                            <Avatar src={item.avatar} />\n                        )}\n                        <div className=\"ml-3\">\n                            {currentUserId !== item.contactId && (\n                                <h5 className=\"mt-0 mb-1 text-14\">\n                                    {item.name}\n                                </h5>\n                            )}\n                            <div\n                                className={clsx(\n                                    'p-2 mb-2 max-w-240 border-radius-4 text-14 whitespace-pre-wrap',\n                                    classes.lightBG\n                                )}\n                            >\n                                {item.text}\n                            </div>\n                            <span className=\"text-muted text-13 font-medium\">\n                                1 minute ago\n                            </span>\n                        </div>\n                    </div>\n                ))}\n\n                {/* example of image sent by current user*/}\n                <div className=\"p-5 flex justify-end\">\n                    <div className=\"ml-3\">\n                        <div className=\"p-2 mb-2 flex justify-end items-center max-w-240 bg-light-gray border-radius-4 text-14\">\n                            <img\n                                className=\"w-40\"\n                                src=\"/assets/images/laptop-1.png\"\n                                alt=\"laptop\"\n                            />\n                            <div className=\"ml-3\">\n                                <h6 className=\"mt-0 mb-1\">Asus K555LA.png</h6>\n                                <span className=\"text-muted font-medium text-13\">\n                                    21.5KB\n                                </span>\n                            </div>\n                        </div>\n                        <span className=\"text-muted text-13 font-medium\">\n                            1 minute ago\n                        </span>\n                    </div>\n                </div>\n            </ScrollBar>\n            <div>\n                <Divider className={classes.dividerBG} />\n                <TextField\n                    placeholder=\"Type here ...\"\n                    multiline\n                    rowsMax={4}\n                    fullWidth\n                    InputProps={{\n                        disableUnderline: true,\n                        endAdornment: (\n                            <div className=\"flex\">\n                                <IconButton size=\"small\">\n                                    <Icon className=\"text-body\">tag_faces</Icon>\n                                </IconButton>\n                                <IconButton size=\"small\">\n                                    <Icon className=\"text-body\">\n                                        attachment\n                                    </Icon>\n                                </IconButton>\n                            </div>\n                        ),\n                        classes: { root: 'pl-5 pr-3 py-3 text-body' },\n                    }}\n                    value={message}\n                    onChange={(e) => setMessage(e.target.value)}\n                    onKeyUp={sendMessageOnEnter}\n                />\n            </div>\n        </div>\n    )\n}\n\nexport default Chatbox\n"]},"metadata":{},"sourceType":"module"}