{"ast":null,"code":"var guid = require(\"./core/guid\");\n\nvar env = require(\"./core/env\");\n\nvar zrUtil = require(\"./core/util\");\n\nvar Handler = require(\"./Handler\");\n\nvar Storage = require(\"./Storage\");\n\nvar Painter = require(\"./Painter\");\n\nvar Animation = require(\"./animation/Animation\");\n\nvar HandlerProxy = require(\"./dom/HandlerProxy\");\n/*!\n* ZRender, a high performance 2d drawing library.\n*\n* Copyright (c) 2013, Baidu Inc.\n* All rights reserved.\n*\n* LICENSE\n* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt\n*/\n\n\nvar useVML = !env.canvasSupported;\nvar painterCtors = {\n  canvas: Painter\n};\nvar instances = {}; // ZRender实例map索引\n\n/**\n * @type {string}\n */\n\nvar version = '4.3.2';\n/**\n * Initializing a zrender instance\n * @param {HTMLElement} dom\n * @param {Object} [opts]\n * @param {string} [opts.renderer='canvas'] 'canvas' or 'svg'\n * @param {number} [opts.devicePixelRatio]\n * @param {number|string} [opts.width] Can be 'auto' (the same as null/undefined)\n * @param {number|string} [opts.height] Can be 'auto' (the same as null/undefined)\n * @return {module:zrender/ZRender}\n */\n\nfunction init(dom, opts) {\n  var zr = new ZRender(guid(), dom, opts);\n  instances[zr.id] = zr;\n  return zr;\n}\n/**\n * Dispose zrender instance\n * @param {module:zrender/ZRender} zr\n */\n\n\nfunction dispose(zr) {\n  if (zr) {\n    zr.dispose();\n  } else {\n    for (var key in instances) {\n      if (instances.hasOwnProperty(key)) {\n        instances[key].dispose();\n      }\n    }\n\n    instances = {};\n  }\n\n  return this;\n}\n/**\n * Get zrender instance by id\n * @param {string} id zrender instance id\n * @return {module:zrender/ZRender}\n */\n\n\nfunction getInstance(id) {\n  return instances[id];\n}\n\nfunction registerPainter(name, Ctor) {\n  painterCtors[name] = Ctor;\n}\n\nfunction delInstance(id) {\n  delete instances[id];\n}\n/**\n * @module zrender/ZRender\n */\n\n/**\n * @constructor\n * @alias module:zrender/ZRender\n * @param {string} id\n * @param {HTMLElement} dom\n * @param {Object} opts\n * @param {string} [opts.renderer='canvas'] 'canvas' or 'svg'\n * @param {number} [opts.devicePixelRatio]\n * @param {number} [opts.width] Can be 'auto' (the same as null/undefined)\n * @param {number} [opts.height] Can be 'auto' (the same as null/undefined)\n */\n\n\nvar ZRender = function ZRender(id, dom, opts) {\n  opts = opts || {};\n  /**\n   * @type {HTMLDomElement}\n   */\n\n  this.dom = dom;\n  /**\n   * @type {string}\n   */\n\n  this.id = id;\n  var self = this;\n  var storage = new Storage();\n  var rendererType = opts.renderer; // TODO WebGL\n\n  if (useVML) {\n    if (!painterCtors.vml) {\n      throw new Error('You need to require \\'zrender/vml/vml\\' to support IE8');\n    }\n\n    rendererType = 'vml';\n  } else if (!rendererType || !painterCtors[rendererType]) {\n    rendererType = 'canvas';\n  }\n\n  var painter = new painterCtors[rendererType](dom, storage, opts, id);\n  this.storage = storage;\n  this.painter = painter;\n  var handerProxy = !env.node && !env.worker ? new HandlerProxy(painter.getViewportRoot(), painter.root) : null;\n  this.handler = new Handler(storage, painter, handerProxy, painter.root);\n  /**\n   * @type {module:zrender/animation/Animation}\n   */\n\n  this.animation = new Animation({\n    stage: {\n      update: zrUtil.bind(this.flush, this)\n    }\n  });\n  this.animation.start();\n  /**\n   * @type {boolean}\n   * @private\n   */\n\n  this._needsRefresh; // 修改 storage.delFromStorage, 每次删除元素之前删除动画\n  // FIXME 有点ugly\n\n  var oldDelFromStorage = storage.delFromStorage;\n  var oldAddToStorage = storage.addToStorage;\n\n  storage.delFromStorage = function (el) {\n    oldDelFromStorage.call(storage, el);\n    el && el.removeSelfFromZr(self);\n  };\n\n  storage.addToStorage = function (el) {\n    oldAddToStorage.call(storage, el);\n    el.addSelfToZr(self);\n  };\n};\n\nZRender.prototype = {\n  constructor: ZRender,\n\n  /**\n   * 获取实例唯一标识\n   * @return {string}\n   */\n  getId: function getId() {\n    return this.id;\n  },\n\n  /**\n   * 添加元素\n   * @param  {module:zrender/Element} el\n   */\n  add: function add(el) {\n    this.storage.addRoot(el);\n    this._needsRefresh = true;\n  },\n\n  /**\n   * 删除元素\n   * @param  {module:zrender/Element} el\n   */\n  remove: function remove(el) {\n    this.storage.delRoot(el);\n    this._needsRefresh = true;\n  },\n\n  /**\n   * Change configuration of layer\n   * @param {string} zLevel\n   * @param {Object} config\n   * @param {string} [config.clearColor=0] Clear color\n   * @param {string} [config.motionBlur=false] If enable motion blur\n   * @param {number} [config.lastFrameAlpha=0.7] Motion blur factor. Larger value cause longer trailer\n  */\n  configLayer: function configLayer(zLevel, config) {\n    if (this.painter.configLayer) {\n      this.painter.configLayer(zLevel, config);\n    }\n\n    this._needsRefresh = true;\n  },\n\n  /**\n   * Set background color\n   * @param {string} backgroundColor\n   */\n  setBackgroundColor: function setBackgroundColor(backgroundColor) {\n    if (this.painter.setBackgroundColor) {\n      this.painter.setBackgroundColor(backgroundColor);\n    }\n\n    this._needsRefresh = true;\n  },\n\n  /**\n   * Repaint the canvas immediately\n   */\n  refreshImmediately: function refreshImmediately() {\n    // var start = new Date();\n    // Clear needsRefresh ahead to avoid something wrong happens in refresh\n    // Or it will cause zrender refreshes again and again.\n    this._needsRefresh = this._needsRefreshHover = false;\n    this.painter.refresh(); // Avoid trigger zr.refresh in Element#beforeUpdate hook\n\n    this._needsRefresh = this._needsRefreshHover = false; // var end = new Date();\n    // var log = document.getElementById('log');\n    // if (log) {\n    //     log.innerHTML = log.innerHTML + '<br>' + (end - start);\n    // }\n  },\n\n  /**\n   * Mark and repaint the canvas in the next frame of browser\n   */\n  refresh: function refresh() {\n    this._needsRefresh = true;\n  },\n\n  /**\n   * Perform all refresh\n   */\n  flush: function flush() {\n    var triggerRendered;\n\n    if (this._needsRefresh) {\n      triggerRendered = true;\n      this.refreshImmediately();\n    }\n\n    if (this._needsRefreshHover) {\n      triggerRendered = true;\n      this.refreshHoverImmediately();\n    }\n\n    triggerRendered && this.trigger('rendered');\n  },\n\n  /**\n   * Add element to hover layer\n   * @param  {module:zrender/Element} el\n   * @param {Object} style\n   */\n  addHover: function addHover(el, style) {\n    if (this.painter.addHover) {\n      var elMirror = this.painter.addHover(el, style);\n      this.refreshHover();\n      return elMirror;\n    }\n  },\n\n  /**\n   * Add element from hover layer\n   * @param  {module:zrender/Element} el\n   */\n  removeHover: function removeHover(el) {\n    if (this.painter.removeHover) {\n      this.painter.removeHover(el);\n      this.refreshHover();\n    }\n  },\n\n  /**\n   * Clear all hover elements in hover layer\n   * @param  {module:zrender/Element} el\n   */\n  clearHover: function clearHover() {\n    if (this.painter.clearHover) {\n      this.painter.clearHover();\n      this.refreshHover();\n    }\n  },\n\n  /**\n   * Refresh hover in next frame\n   */\n  refreshHover: function refreshHover() {\n    this._needsRefreshHover = true;\n  },\n\n  /**\n   * Refresh hover immediately\n   */\n  refreshHoverImmediately: function refreshHoverImmediately() {\n    this._needsRefreshHover = false;\n    this.painter.refreshHover && this.painter.refreshHover();\n  },\n\n  /**\n   * Resize the canvas.\n   * Should be invoked when container size is changed\n   * @param {Object} [opts]\n   * @param {number|string} [opts.width] Can be 'auto' (the same as null/undefined)\n   * @param {number|string} [opts.height] Can be 'auto' (the same as null/undefined)\n   */\n  resize: function resize(opts) {\n    opts = opts || {};\n    this.painter.resize(opts.width, opts.height);\n    this.handler.resize();\n  },\n\n  /**\n   * Stop and clear all animation immediately\n   */\n  clearAnimation: function clearAnimation() {\n    this.animation.clear();\n  },\n\n  /**\n   * Get container width\n   */\n  getWidth: function getWidth() {\n    return this.painter.getWidth();\n  },\n\n  /**\n   * Get container height\n   */\n  getHeight: function getHeight() {\n    return this.painter.getHeight();\n  },\n\n  /**\n   * Export the canvas as Base64 URL\n   * @param {string} type\n   * @param {string} [backgroundColor='#fff']\n   * @return {string} Base64 URL\n   */\n  // toDataURL: function(type, backgroundColor) {\n  //     return this.painter.getRenderedCanvas({\n  //         backgroundColor: backgroundColor\n  //     }).toDataURL(type);\n  // },\n\n  /**\n   * Converting a path to image.\n   * It has much better performance of drawing image rather than drawing a vector path.\n   * @param {module:zrender/graphic/Path} e\n   * @param {number} width\n   * @param {number} height\n   */\n  pathToImage: function pathToImage(e, dpr) {\n    return this.painter.pathToImage(e, dpr);\n  },\n\n  /**\n   * Set default cursor\n   * @param {string} [cursorStyle='default'] 例如 crosshair\n   */\n  setCursorStyle: function setCursorStyle(cursorStyle) {\n    this.handler.setCursorStyle(cursorStyle);\n  },\n\n  /**\n   * Find hovered element\n   * @param {number} x\n   * @param {number} y\n   * @return {Object} {target, topTarget}\n   */\n  findHover: function findHover(x, y) {\n    return this.handler.findHover(x, y);\n  },\n\n  /**\n   * Bind event\n   *\n   * @param {string} eventName Event name\n   * @param {Function} eventHandler Handler function\n   * @param {Object} [context] Context object\n   */\n  on: function on(eventName, eventHandler, context) {\n    this.handler.on(eventName, eventHandler, context);\n  },\n\n  /**\n   * Unbind event\n   * @param {string} eventName Event name\n   * @param {Function} [eventHandler] Handler function\n   */\n  off: function off(eventName, eventHandler) {\n    this.handler.off(eventName, eventHandler);\n  },\n\n  /**\n   * Trigger event manually\n   *\n   * @param {string} eventName Event name\n   * @param {event=} event Event object\n   */\n  trigger: function trigger(eventName, event) {\n    this.handler.trigger(eventName, event);\n  },\n\n  /**\n   * Clear all objects and the canvas.\n   */\n  clear: function clear() {\n    this.storage.delRoot();\n    this.painter.clear();\n  },\n\n  /**\n   * Dispose self.\n   */\n  dispose: function dispose() {\n    this.animation.stop();\n    this.clear();\n    this.storage.dispose();\n    this.painter.dispose();\n    this.handler.dispose();\n    this.animation = this.storage = this.painter = this.handler = null;\n    delInstance(this.id);\n  }\n};\nexports.version = version;\nexports.init = init;\nexports.dispose = dispose;\nexports.getInstance = getInstance;\nexports.registerPainter = registerPainter;","map":{"version":3,"sources":["/home/johnatan/MP/mp-app/ap/node_modules/zrender/lib/zrender.js"],"names":["guid","require","env","zrUtil","Handler","Storage","Painter","Animation","HandlerProxy","useVML","canvasSupported","painterCtors","canvas","instances","version","init","dom","opts","zr","ZRender","id","dispose","key","hasOwnProperty","getInstance","registerPainter","name","Ctor","delInstance","self","storage","rendererType","renderer","vml","Error","painter","handerProxy","node","worker","getViewportRoot","root","handler","animation","stage","update","bind","flush","start","_needsRefresh","oldDelFromStorage","delFromStorage","oldAddToStorage","addToStorage","el","call","removeSelfFromZr","addSelfToZr","prototype","constructor","getId","add","addRoot","remove","delRoot","configLayer","zLevel","config","setBackgroundColor","backgroundColor","refreshImmediately","_needsRefreshHover","refresh","triggerRendered","refreshHoverImmediately","trigger","addHover","style","elMirror","refreshHover","removeHover","clearHover","resize","width","height","clearAnimation","clear","getWidth","getHeight","pathToImage","e","dpr","setCursorStyle","cursorStyle","findHover","x","y","on","eventName","eventHandler","context","off","event","stop","exports"],"mappings":"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","sourcesContent":["var guid = require(\"./core/guid\");\n\nvar env = require(\"./core/env\");\n\nvar zrUtil = require(\"./core/util\");\n\nvar Handler = require(\"./Handler\");\n\nvar Storage = require(\"./Storage\");\n\nvar Painter = require(\"./Painter\");\n\nvar Animation = require(\"./animation/Animation\");\n\nvar HandlerProxy = require(\"./dom/HandlerProxy\");\n\n/*!\n* ZRender, a high performance 2d drawing library.\n*\n* Copyright (c) 2013, Baidu Inc.\n* All rights reserved.\n*\n* LICENSE\n* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt\n*/\nvar useVML = !env.canvasSupported;\nvar painterCtors = {\n  canvas: Painter\n};\nvar instances = {}; // ZRender实例map索引\n\n/**\n * @type {string}\n */\n\nvar version = '4.3.2';\n/**\n * Initializing a zrender instance\n * @param {HTMLElement} dom\n * @param {Object} [opts]\n * @param {string} [opts.renderer='canvas'] 'canvas' or 'svg'\n * @param {number} [opts.devicePixelRatio]\n * @param {number|string} [opts.width] Can be 'auto' (the same as null/undefined)\n * @param {number|string} [opts.height] Can be 'auto' (the same as null/undefined)\n * @return {module:zrender/ZRender}\n */\n\nfunction init(dom, opts) {\n  var zr = new ZRender(guid(), dom, opts);\n  instances[zr.id] = zr;\n  return zr;\n}\n/**\n * Dispose zrender instance\n * @param {module:zrender/ZRender} zr\n */\n\n\nfunction dispose(zr) {\n  if (zr) {\n    zr.dispose();\n  } else {\n    for (var key in instances) {\n      if (instances.hasOwnProperty(key)) {\n        instances[key].dispose();\n      }\n    }\n\n    instances = {};\n  }\n\n  return this;\n}\n/**\n * Get zrender instance by id\n * @param {string} id zrender instance id\n * @return {module:zrender/ZRender}\n */\n\n\nfunction getInstance(id) {\n  return instances[id];\n}\n\nfunction registerPainter(name, Ctor) {\n  painterCtors[name] = Ctor;\n}\n\nfunction delInstance(id) {\n  delete instances[id];\n}\n/**\n * @module zrender/ZRender\n */\n\n/**\n * @constructor\n * @alias module:zrender/ZRender\n * @param {string} id\n * @param {HTMLElement} dom\n * @param {Object} opts\n * @param {string} [opts.renderer='canvas'] 'canvas' or 'svg'\n * @param {number} [opts.devicePixelRatio]\n * @param {number} [opts.width] Can be 'auto' (the same as null/undefined)\n * @param {number} [opts.height] Can be 'auto' (the same as null/undefined)\n */\n\n\nvar ZRender = function (id, dom, opts) {\n  opts = opts || {};\n  /**\n   * @type {HTMLDomElement}\n   */\n\n  this.dom = dom;\n  /**\n   * @type {string}\n   */\n\n  this.id = id;\n  var self = this;\n  var storage = new Storage();\n  var rendererType = opts.renderer; // TODO WebGL\n\n  if (useVML) {\n    if (!painterCtors.vml) {\n      throw new Error('You need to require \\'zrender/vml/vml\\' to support IE8');\n    }\n\n    rendererType = 'vml';\n  } else if (!rendererType || !painterCtors[rendererType]) {\n    rendererType = 'canvas';\n  }\n\n  var painter = new painterCtors[rendererType](dom, storage, opts, id);\n  this.storage = storage;\n  this.painter = painter;\n  var handerProxy = !env.node && !env.worker ? new HandlerProxy(painter.getViewportRoot(), painter.root) : null;\n  this.handler = new Handler(storage, painter, handerProxy, painter.root);\n  /**\n   * @type {module:zrender/animation/Animation}\n   */\n\n  this.animation = new Animation({\n    stage: {\n      update: zrUtil.bind(this.flush, this)\n    }\n  });\n  this.animation.start();\n  /**\n   * @type {boolean}\n   * @private\n   */\n\n  this._needsRefresh; // 修改 storage.delFromStorage, 每次删除元素之前删除动画\n  // FIXME 有点ugly\n\n  var oldDelFromStorage = storage.delFromStorage;\n  var oldAddToStorage = storage.addToStorage;\n\n  storage.delFromStorage = function (el) {\n    oldDelFromStorage.call(storage, el);\n    el && el.removeSelfFromZr(self);\n  };\n\n  storage.addToStorage = function (el) {\n    oldAddToStorage.call(storage, el);\n    el.addSelfToZr(self);\n  };\n};\n\nZRender.prototype = {\n  constructor: ZRender,\n\n  /**\n   * 获取实例唯一标识\n   * @return {string}\n   */\n  getId: function () {\n    return this.id;\n  },\n\n  /**\n   * 添加元素\n   * @param  {module:zrender/Element} el\n   */\n  add: function (el) {\n    this.storage.addRoot(el);\n    this._needsRefresh = true;\n  },\n\n  /**\n   * 删除元素\n   * @param  {module:zrender/Element} el\n   */\n  remove: function (el) {\n    this.storage.delRoot(el);\n    this._needsRefresh = true;\n  },\n\n  /**\n   * Change configuration of layer\n   * @param {string} zLevel\n   * @param {Object} config\n   * @param {string} [config.clearColor=0] Clear color\n   * @param {string} [config.motionBlur=false] If enable motion blur\n   * @param {number} [config.lastFrameAlpha=0.7] Motion blur factor. Larger value cause longer trailer\n  */\n  configLayer: function (zLevel, config) {\n    if (this.painter.configLayer) {\n      this.painter.configLayer(zLevel, config);\n    }\n\n    this._needsRefresh = true;\n  },\n\n  /**\n   * Set background color\n   * @param {string} backgroundColor\n   */\n  setBackgroundColor: function (backgroundColor) {\n    if (this.painter.setBackgroundColor) {\n      this.painter.setBackgroundColor(backgroundColor);\n    }\n\n    this._needsRefresh = true;\n  },\n\n  /**\n   * Repaint the canvas immediately\n   */\n  refreshImmediately: function () {\n    // var start = new Date();\n    // Clear needsRefresh ahead to avoid something wrong happens in refresh\n    // Or it will cause zrender refreshes again and again.\n    this._needsRefresh = this._needsRefreshHover = false;\n    this.painter.refresh(); // Avoid trigger zr.refresh in Element#beforeUpdate hook\n\n    this._needsRefresh = this._needsRefreshHover = false; // var end = new Date();\n    // var log = document.getElementById('log');\n    // if (log) {\n    //     log.innerHTML = log.innerHTML + '<br>' + (end - start);\n    // }\n  },\n\n  /**\n   * Mark and repaint the canvas in the next frame of browser\n   */\n  refresh: function () {\n    this._needsRefresh = true;\n  },\n\n  /**\n   * Perform all refresh\n   */\n  flush: function () {\n    var triggerRendered;\n\n    if (this._needsRefresh) {\n      triggerRendered = true;\n      this.refreshImmediately();\n    }\n\n    if (this._needsRefreshHover) {\n      triggerRendered = true;\n      this.refreshHoverImmediately();\n    }\n\n    triggerRendered && this.trigger('rendered');\n  },\n\n  /**\n   * Add element to hover layer\n   * @param  {module:zrender/Element} el\n   * @param {Object} style\n   */\n  addHover: function (el, style) {\n    if (this.painter.addHover) {\n      var elMirror = this.painter.addHover(el, style);\n      this.refreshHover();\n      return elMirror;\n    }\n  },\n\n  /**\n   * Add element from hover layer\n   * @param  {module:zrender/Element} el\n   */\n  removeHover: function (el) {\n    if (this.painter.removeHover) {\n      this.painter.removeHover(el);\n      this.refreshHover();\n    }\n  },\n\n  /**\n   * Clear all hover elements in hover layer\n   * @param  {module:zrender/Element} el\n   */\n  clearHover: function () {\n    if (this.painter.clearHover) {\n      this.painter.clearHover();\n      this.refreshHover();\n    }\n  },\n\n  /**\n   * Refresh hover in next frame\n   */\n  refreshHover: function () {\n    this._needsRefreshHover = true;\n  },\n\n  /**\n   * Refresh hover immediately\n   */\n  refreshHoverImmediately: function () {\n    this._needsRefreshHover = false;\n    this.painter.refreshHover && this.painter.refreshHover();\n  },\n\n  /**\n   * Resize the canvas.\n   * Should be invoked when container size is changed\n   * @param {Object} [opts]\n   * @param {number|string} [opts.width] Can be 'auto' (the same as null/undefined)\n   * @param {number|string} [opts.height] Can be 'auto' (the same as null/undefined)\n   */\n  resize: function (opts) {\n    opts = opts || {};\n    this.painter.resize(opts.width, opts.height);\n    this.handler.resize();\n  },\n\n  /**\n   * Stop and clear all animation immediately\n   */\n  clearAnimation: function () {\n    this.animation.clear();\n  },\n\n  /**\n   * Get container width\n   */\n  getWidth: function () {\n    return this.painter.getWidth();\n  },\n\n  /**\n   * Get container height\n   */\n  getHeight: function () {\n    return this.painter.getHeight();\n  },\n\n  /**\n   * Export the canvas as Base64 URL\n   * @param {string} type\n   * @param {string} [backgroundColor='#fff']\n   * @return {string} Base64 URL\n   */\n  // toDataURL: function(type, backgroundColor) {\n  //     return this.painter.getRenderedCanvas({\n  //         backgroundColor: backgroundColor\n  //     }).toDataURL(type);\n  // },\n\n  /**\n   * Converting a path to image.\n   * It has much better performance of drawing image rather than drawing a vector path.\n   * @param {module:zrender/graphic/Path} e\n   * @param {number} width\n   * @param {number} height\n   */\n  pathToImage: function (e, dpr) {\n    return this.painter.pathToImage(e, dpr);\n  },\n\n  /**\n   * Set default cursor\n   * @param {string} [cursorStyle='default'] 例如 crosshair\n   */\n  setCursorStyle: function (cursorStyle) {\n    this.handler.setCursorStyle(cursorStyle);\n  },\n\n  /**\n   * Find hovered element\n   * @param {number} x\n   * @param {number} y\n   * @return {Object} {target, topTarget}\n   */\n  findHover: function (x, y) {\n    return this.handler.findHover(x, y);\n  },\n\n  /**\n   * Bind event\n   *\n   * @param {string} eventName Event name\n   * @param {Function} eventHandler Handler function\n   * @param {Object} [context] Context object\n   */\n  on: function (eventName, eventHandler, context) {\n    this.handler.on(eventName, eventHandler, context);\n  },\n\n  /**\n   * Unbind event\n   * @param {string} eventName Event name\n   * @param {Function} [eventHandler] Handler function\n   */\n  off: function (eventName, eventHandler) {\n    this.handler.off(eventName, eventHandler);\n  },\n\n  /**\n   * Trigger event manually\n   *\n   * @param {string} eventName Event name\n   * @param {event=} event Event object\n   */\n  trigger: function (eventName, event) {\n    this.handler.trigger(eventName, event);\n  },\n\n  /**\n   * Clear all objects and the canvas.\n   */\n  clear: function () {\n    this.storage.delRoot();\n    this.painter.clear();\n  },\n\n  /**\n   * Dispose self.\n   */\n  dispose: function () {\n    this.animation.stop();\n    this.clear();\n    this.storage.dispose();\n    this.painter.dispose();\n    this.handler.dispose();\n    this.animation = this.storage = this.painter = this.handler = null;\n    delInstance(this.id);\n  }\n};\nexports.version = version;\nexports.init = init;\nexports.dispose = dispose;\nexports.getInstance = getInstance;\nexports.registerPainter = registerPainter;"]},"metadata":{},"sourceType":"script"}