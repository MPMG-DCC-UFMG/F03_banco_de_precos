{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Polar = require(\"./Polar\");\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\n\nvar _axisHelper = require(\"../../coord/axisHelper\");\n\nvar createScaleByModel = _axisHelper.createScaleByModel;\nvar niceScaleExtent = _axisHelper.niceScaleExtent;\n\nvar CoordinateSystem = require(\"../../CoordinateSystem\");\n\nvar _dataStackHelper = require(\"../../data/helper/dataStackHelper\");\n\nvar getStackedDimension = _dataStackHelper.getStackedDimension;\n\nrequire(\"./PolarModel\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// TODO Axis scale\n\n/**\n * Resize method bound to the polar\n * @param {module:echarts/coord/polar/PolarModel} polarModel\n * @param {module:echarts/ExtensionAPI} api\n */\n\n\nfunction resizePolar(polar, polarModel, api) {\n  var center = polarModel.get('center');\n  var width = api.getWidth();\n  var height = api.getHeight();\n  polar.cx = parsePercent(center[0], width);\n  polar.cy = parsePercent(center[1], height);\n  var radiusAxis = polar.getRadiusAxis();\n  var size = Math.min(width, height) / 2;\n  var radius = polarModel.get('radius');\n\n  if (radius == null) {\n    radius = [0, '100%'];\n  } else if (!zrUtil.isArray(radius)) {\n    // r0 = 0\n    radius = [0, radius];\n  }\n\n  radius = [parsePercent(radius[0], size), parsePercent(radius[1], size)];\n  radiusAxis.inverse ? radiusAxis.setExtent(radius[1], radius[0]) : radiusAxis.setExtent(radius[0], radius[1]);\n}\n/**\n * Update polar\n */\n\n\nfunction updatePolarScale(ecModel, api) {\n  var polar = this;\n  var angleAxis = polar.getAngleAxis();\n  var radiusAxis = polar.getRadiusAxis(); // Reset scale\n\n  angleAxis.scale.setExtent(Infinity, -Infinity);\n  radiusAxis.scale.setExtent(Infinity, -Infinity);\n  ecModel.eachSeries(function (seriesModel) {\n    if (seriesModel.coordinateSystem === polar) {\n      var data = seriesModel.getData();\n      zrUtil.each(data.mapDimension('radius', true), function (dim) {\n        radiusAxis.scale.unionExtentFromData(data, getStackedDimension(data, dim));\n      });\n      zrUtil.each(data.mapDimension('angle', true), function (dim) {\n        angleAxis.scale.unionExtentFromData(data, getStackedDimension(data, dim));\n      });\n    }\n  });\n  niceScaleExtent(angleAxis.scale, angleAxis.model);\n  niceScaleExtent(radiusAxis.scale, radiusAxis.model); // Fix extent of category angle axis\n\n  if (angleAxis.type === 'category' && !angleAxis.onBand) {\n    var extent = angleAxis.getExtent();\n    var diff = 360 / angleAxis.scale.count();\n    angleAxis.inverse ? extent[1] += diff : extent[1] -= diff;\n    angleAxis.setExtent(extent[0], extent[1]);\n  }\n}\n/**\n * Set common axis properties\n * @param {module:echarts/coord/polar/AngleAxis|module:echarts/coord/polar/RadiusAxis}\n * @param {module:echarts/coord/polar/AxisModel}\n * @inner\n */\n\n\nfunction setAxis(axis, axisModel) {\n  axis.type = axisModel.get('type');\n  axis.scale = createScaleByModel(axisModel);\n  axis.onBand = axisModel.get('boundaryGap') && axis.type === 'category';\n  axis.inverse = axisModel.get('inverse');\n\n  if (axisModel.mainType === 'angleAxis') {\n    axis.inverse ^= axisModel.get('clockwise');\n    var startAngle = axisModel.get('startAngle');\n    axis.setExtent(startAngle, startAngle + (axis.inverse ? -360 : 360));\n  } // Inject axis instance\n\n\n  axisModel.axis = axis;\n  axis.model = axisModel;\n}\n\nvar polarCreator = {\n  dimensions: Polar.prototype.dimensions,\n  create: function create(ecModel, api) {\n    var polarList = [];\n    ecModel.eachComponent('polar', function (polarModel, idx) {\n      var polar = new Polar(idx); // Inject resize and update method\n\n      polar.update = updatePolarScale;\n      var radiusAxis = polar.getRadiusAxis();\n      var angleAxis = polar.getAngleAxis();\n      var radiusAxisModel = polarModel.findAxisModel('radiusAxis');\n      var angleAxisModel = polarModel.findAxisModel('angleAxis');\n      setAxis(radiusAxis, radiusAxisModel);\n      setAxis(angleAxis, angleAxisModel);\n      resizePolar(polar, polarModel, api);\n      polarList.push(polar);\n      polarModel.coordinateSystem = polar;\n      polar.model = polarModel;\n    }); // Inject coordinateSystem to series\n\n    ecModel.eachSeries(function (seriesModel) {\n      if (seriesModel.get('coordinateSystem') === 'polar') {\n        var polarModel = ecModel.queryComponents({\n          mainType: 'polar',\n          index: seriesModel.get('polarIndex'),\n          id: seriesModel.get('polarId')\n        })[0];\n        seriesModel.coordinateSystem = polarModel.coordinateSystem;\n      }\n    });\n    return polarList;\n  }\n};\nCoordinateSystem.register('polar', polarCreator);","map":{"version":3,"sources":["/home/johnatan/MP/mp-app/ap/node_modules/echarts/lib/coord/polar/polarCreator.js"],"names":["_config","require","__DEV__","zrUtil","Polar","_number","parsePercent","_axisHelper","createScaleByModel","niceScaleExtent","CoordinateSystem","_dataStackHelper","getStackedDimension","resizePolar","polar","polarModel","api","center","get","width","getWidth","height","getHeight","cx","cy","radiusAxis","getRadiusAxis","size","Math","min","radius","isArray","inverse","setExtent","updatePolarScale","ecModel","angleAxis","getAngleAxis","scale","Infinity","eachSeries","seriesModel","coordinateSystem","data","getData","each","mapDimension","dim","unionExtentFromData","model","type","onBand","extent","getExtent","diff","count","setAxis","axis","axisModel","mainType","startAngle","polarCreator","dimensions","prototype","create","polarList","eachComponent","idx","update","radiusAxisModel","findAxisModel","angleAxisModel","push","queryComponents","index","id","register"],"mappings":"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","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Polar = require(\"./Polar\");\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\n\nvar _axisHelper = require(\"../../coord/axisHelper\");\n\nvar createScaleByModel = _axisHelper.createScaleByModel;\nvar niceScaleExtent = _axisHelper.niceScaleExtent;\n\nvar CoordinateSystem = require(\"../../CoordinateSystem\");\n\nvar _dataStackHelper = require(\"../../data/helper/dataStackHelper\");\n\nvar getStackedDimension = _dataStackHelper.getStackedDimension;\n\nrequire(\"./PolarModel\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// TODO Axis scale\n\n/**\n * Resize method bound to the polar\n * @param {module:echarts/coord/polar/PolarModel} polarModel\n * @param {module:echarts/ExtensionAPI} api\n */\nfunction resizePolar(polar, polarModel, api) {\n  var center = polarModel.get('center');\n  var width = api.getWidth();\n  var height = api.getHeight();\n  polar.cx = parsePercent(center[0], width);\n  polar.cy = parsePercent(center[1], height);\n  var radiusAxis = polar.getRadiusAxis();\n  var size = Math.min(width, height) / 2;\n  var radius = polarModel.get('radius');\n\n  if (radius == null) {\n    radius = [0, '100%'];\n  } else if (!zrUtil.isArray(radius)) {\n    // r0 = 0\n    radius = [0, radius];\n  }\n\n  radius = [parsePercent(radius[0], size), parsePercent(radius[1], size)];\n  radiusAxis.inverse ? radiusAxis.setExtent(radius[1], radius[0]) : radiusAxis.setExtent(radius[0], radius[1]);\n}\n/**\n * Update polar\n */\n\n\nfunction updatePolarScale(ecModel, api) {\n  var polar = this;\n  var angleAxis = polar.getAngleAxis();\n  var radiusAxis = polar.getRadiusAxis(); // Reset scale\n\n  angleAxis.scale.setExtent(Infinity, -Infinity);\n  radiusAxis.scale.setExtent(Infinity, -Infinity);\n  ecModel.eachSeries(function (seriesModel) {\n    if (seriesModel.coordinateSystem === polar) {\n      var data = seriesModel.getData();\n      zrUtil.each(data.mapDimension('radius', true), function (dim) {\n        radiusAxis.scale.unionExtentFromData(data, getStackedDimension(data, dim));\n      });\n      zrUtil.each(data.mapDimension('angle', true), function (dim) {\n        angleAxis.scale.unionExtentFromData(data, getStackedDimension(data, dim));\n      });\n    }\n  });\n  niceScaleExtent(angleAxis.scale, angleAxis.model);\n  niceScaleExtent(radiusAxis.scale, radiusAxis.model); // Fix extent of category angle axis\n\n  if (angleAxis.type === 'category' && !angleAxis.onBand) {\n    var extent = angleAxis.getExtent();\n    var diff = 360 / angleAxis.scale.count();\n    angleAxis.inverse ? extent[1] += diff : extent[1] -= diff;\n    angleAxis.setExtent(extent[0], extent[1]);\n  }\n}\n/**\n * Set common axis properties\n * @param {module:echarts/coord/polar/AngleAxis|module:echarts/coord/polar/RadiusAxis}\n * @param {module:echarts/coord/polar/AxisModel}\n * @inner\n */\n\n\nfunction setAxis(axis, axisModel) {\n  axis.type = axisModel.get('type');\n  axis.scale = createScaleByModel(axisModel);\n  axis.onBand = axisModel.get('boundaryGap') && axis.type === 'category';\n  axis.inverse = axisModel.get('inverse');\n\n  if (axisModel.mainType === 'angleAxis') {\n    axis.inverse ^= axisModel.get('clockwise');\n    var startAngle = axisModel.get('startAngle');\n    axis.setExtent(startAngle, startAngle + (axis.inverse ? -360 : 360));\n  } // Inject axis instance\n\n\n  axisModel.axis = axis;\n  axis.model = axisModel;\n}\n\nvar polarCreator = {\n  dimensions: Polar.prototype.dimensions,\n  create: function (ecModel, api) {\n    var polarList = [];\n    ecModel.eachComponent('polar', function (polarModel, idx) {\n      var polar = new Polar(idx); // Inject resize and update method\n\n      polar.update = updatePolarScale;\n      var radiusAxis = polar.getRadiusAxis();\n      var angleAxis = polar.getAngleAxis();\n      var radiusAxisModel = polarModel.findAxisModel('radiusAxis');\n      var angleAxisModel = polarModel.findAxisModel('angleAxis');\n      setAxis(radiusAxis, radiusAxisModel);\n      setAxis(angleAxis, angleAxisModel);\n      resizePolar(polar, polarModel, api);\n      polarList.push(polar);\n      polarModel.coordinateSystem = polar;\n      polar.model = polarModel;\n    }); // Inject coordinateSystem to series\n\n    ecModel.eachSeries(function (seriesModel) {\n      if (seriesModel.get('coordinateSystem') === 'polar') {\n        var polarModel = ecModel.queryComponents({\n          mainType: 'polar',\n          index: seriesModel.get('polarIndex'),\n          id: seriesModel.get('polarId')\n        })[0];\n        seriesModel.coordinateSystem = polarModel.coordinateSystem;\n      }\n    });\n    return polarList;\n  }\n};\nCoordinateSystem.register('polar', polarCreator);"]},"metadata":{},"sourceType":"script"}