{"ast":null,"code":"var Displayable = require(\"./Displayable\");\n\nvar zrUtil = require(\"../core/util\");\n\nvar textContain = require(\"../contain/text\");\n\nvar textHelper = require(\"./helper/text\");\n\nvar _constant = require(\"./constant\");\n\nvar ContextCachedBy = _constant.ContextCachedBy;\n/**\n * @alias zrender/graphic/Text\n * @extends module:zrender/graphic/Displayable\n * @constructor\n * @param {Object} opts\n */\n\nvar Text = function Text(opts) {\n  // jshint ignore:line\n  Displayable.call(this, opts);\n};\n\nText.prototype = {\n  constructor: Text,\n  type: 'text',\n  brush: function brush(ctx, prevEl) {\n    var style = this.style; // Optimize, avoid normalize every time.\n\n    this.__dirty && textHelper.normalizeTextStyle(style, true); // Use props with prefix 'text'.\n\n    style.fill = style.stroke = style.shadowBlur = style.shadowColor = style.shadowOffsetX = style.shadowOffsetY = null;\n    var text = style.text; // Convert to string\n\n    text != null && (text += ''); // Do not apply style.bind in Text node. Because the real bind job\n    // is in textHelper.renderText, and performance of text render should\n    // be considered.\n    // style.bind(ctx, this, prevEl);\n\n    if (!textHelper.needDrawText(text, style)) {\n      // The current el.style is not applied\n      // and should not be used as cache.\n      ctx.__attrCachedBy = ContextCachedBy.NONE;\n      return;\n    }\n\n    this.setTransform(ctx);\n    textHelper.renderText(this, ctx, text, style, null, prevEl);\n    this.restoreTransform(ctx);\n  },\n  getBoundingRect: function getBoundingRect() {\n    var style = this.style; // Optimize, avoid normalize every time.\n\n    this.__dirty && textHelper.normalizeTextStyle(style, true);\n\n    if (!this._rect) {\n      var text = style.text;\n      text != null ? text += '' : text = '';\n      var rect = textContain.getBoundingRect(style.text + '', style.font, style.textAlign, style.textVerticalAlign, style.textPadding, style.textLineHeight, style.rich);\n      rect.x += style.x || 0;\n      rect.y += style.y || 0;\n\n      if (textHelper.getStroke(style.textStroke, style.textStrokeWidth)) {\n        var w = style.textStrokeWidth;\n        rect.x -= w / 2;\n        rect.y -= w / 2;\n        rect.width += w;\n        rect.height += w;\n      }\n\n      this._rect = rect;\n    }\n\n    return this._rect;\n  }\n};\nzrUtil.inherits(Text, Displayable);\nvar _default = Text;\nmodule.exports = _default;","map":{"version":3,"sources":["/home/johnatan/MP/mp-app/ap/node_modules/zrender/lib/graphic/Text.js"],"names":["Displayable","require","zrUtil","textContain","textHelper","_constant","ContextCachedBy","Text","opts","call","prototype","constructor","type","brush","ctx","prevEl","style","__dirty","normalizeTextStyle","fill","stroke","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","text","needDrawText","__attrCachedBy","NONE","setTransform","renderText","restoreTransform","getBoundingRect","_rect","rect","font","textAlign","textVerticalAlign","textPadding","textLineHeight","rich","x","y","getStroke","textStroke","textStrokeWidth","w","width","height","inherits","_default","module","exports"],"mappings":"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","sourcesContent":["var Displayable = require(\"./Displayable\");\n\nvar zrUtil = require(\"../core/util\");\n\nvar textContain = require(\"../contain/text\");\n\nvar textHelper = require(\"./helper/text\");\n\nvar _constant = require(\"./constant\");\n\nvar ContextCachedBy = _constant.ContextCachedBy;\n\n/**\n * @alias zrender/graphic/Text\n * @extends module:zrender/graphic/Displayable\n * @constructor\n * @param {Object} opts\n */\nvar Text = function (opts) {\n  // jshint ignore:line\n  Displayable.call(this, opts);\n};\n\nText.prototype = {\n  constructor: Text,\n  type: 'text',\n  brush: function (ctx, prevEl) {\n    var style = this.style; // Optimize, avoid normalize every time.\n\n    this.__dirty && textHelper.normalizeTextStyle(style, true); // Use props with prefix 'text'.\n\n    style.fill = style.stroke = style.shadowBlur = style.shadowColor = style.shadowOffsetX = style.shadowOffsetY = null;\n    var text = style.text; // Convert to string\n\n    text != null && (text += ''); // Do not apply style.bind in Text node. Because the real bind job\n    // is in textHelper.renderText, and performance of text render should\n    // be considered.\n    // style.bind(ctx, this, prevEl);\n\n    if (!textHelper.needDrawText(text, style)) {\n      // The current el.style is not applied\n      // and should not be used as cache.\n      ctx.__attrCachedBy = ContextCachedBy.NONE;\n      return;\n    }\n\n    this.setTransform(ctx);\n    textHelper.renderText(this, ctx, text, style, null, prevEl);\n    this.restoreTransform(ctx);\n  },\n  getBoundingRect: function () {\n    var style = this.style; // Optimize, avoid normalize every time.\n\n    this.__dirty && textHelper.normalizeTextStyle(style, true);\n\n    if (!this._rect) {\n      var text = style.text;\n      text != null ? text += '' : text = '';\n      var rect = textContain.getBoundingRect(style.text + '', style.font, style.textAlign, style.textVerticalAlign, style.textPadding, style.textLineHeight, style.rich);\n      rect.x += style.x || 0;\n      rect.y += style.y || 0;\n\n      if (textHelper.getStroke(style.textStroke, style.textStrokeWidth)) {\n        var w = style.textStrokeWidth;\n        rect.x -= w / 2;\n        rect.y -= w / 2;\n        rect.width += w;\n        rect.height += w;\n      }\n\n      this._rect = rect;\n    }\n\n    return this._rect;\n  }\n};\nzrUtil.inherits(Text, Displayable);\nvar _default = Text;\nmodule.exports = _default;"]},"metadata":{},"sourceType":"script"}