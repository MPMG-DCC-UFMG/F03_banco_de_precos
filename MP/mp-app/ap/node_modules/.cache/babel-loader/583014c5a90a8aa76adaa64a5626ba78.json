{"ast":null,"code":"var Path = require(\"../Path\");\n\nvar vec2 = require(\"../../core/vector\");\n\nvar _curve = require(\"../../core/curve\");\n\nvar quadraticSubdivide = _curve.quadraticSubdivide;\nvar cubicSubdivide = _curve.cubicSubdivide;\nvar quadraticAt = _curve.quadraticAt;\nvar cubicAt = _curve.cubicAt;\nvar quadraticDerivativeAt = _curve.quadraticDerivativeAt;\nvar cubicDerivativeAt = _curve.cubicDerivativeAt;\n/**\n * 贝塞尔曲线\n * @module zrender/shape/BezierCurve\n */\n\nvar out = [];\n\nfunction someVectorAt(shape, t, isTangent) {\n  var cpx2 = shape.cpx2;\n  var cpy2 = shape.cpy2;\n\n  if (cpx2 === null || cpy2 === null) {\n    return [(isTangent ? cubicDerivativeAt : cubicAt)(shape.x1, shape.cpx1, shape.cpx2, shape.x2, t), (isTangent ? cubicDerivativeAt : cubicAt)(shape.y1, shape.cpy1, shape.cpy2, shape.y2, t)];\n  } else {\n    return [(isTangent ? quadraticDerivativeAt : quadraticAt)(shape.x1, shape.cpx1, shape.x2, t), (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.y1, shape.cpy1, shape.y2, t)];\n  }\n}\n\nvar _default = Path.extend({\n  type: 'bezier-curve',\n  shape: {\n    x1: 0,\n    y1: 0,\n    x2: 0,\n    y2: 0,\n    cpx1: 0,\n    cpy1: 0,\n    // cpx2: 0,\n    // cpy2: 0\n    // Curve show percent, for animating\n    percent: 1\n  },\n  style: {\n    stroke: '#000',\n    fill: null\n  },\n  buildPath: function buildPath(ctx, shape) {\n    var x1 = shape.x1;\n    var y1 = shape.y1;\n    var x2 = shape.x2;\n    var y2 = shape.y2;\n    var cpx1 = shape.cpx1;\n    var cpy1 = shape.cpy1;\n    var cpx2 = shape.cpx2;\n    var cpy2 = shape.cpy2;\n    var percent = shape.percent;\n\n    if (percent === 0) {\n      return;\n    }\n\n    ctx.moveTo(x1, y1);\n\n    if (cpx2 == null || cpy2 == null) {\n      if (percent < 1) {\n        quadraticSubdivide(x1, cpx1, x2, percent, out);\n        cpx1 = out[1];\n        x2 = out[2];\n        quadraticSubdivide(y1, cpy1, y2, percent, out);\n        cpy1 = out[1];\n        y2 = out[2];\n      }\n\n      ctx.quadraticCurveTo(cpx1, cpy1, x2, y2);\n    } else {\n      if (percent < 1) {\n        cubicSubdivide(x1, cpx1, cpx2, x2, percent, out);\n        cpx1 = out[1];\n        cpx2 = out[2];\n        x2 = out[3];\n        cubicSubdivide(y1, cpy1, cpy2, y2, percent, out);\n        cpy1 = out[1];\n        cpy2 = out[2];\n        y2 = out[3];\n      }\n\n      ctx.bezierCurveTo(cpx1, cpy1, cpx2, cpy2, x2, y2);\n    }\n  },\n\n  /**\n   * Get point at percent\n   * @param  {number} t\n   * @return {Array.<number>}\n   */\n  pointAt: function pointAt(t) {\n    return someVectorAt(this.shape, t, false);\n  },\n\n  /**\n   * Get tangent at percent\n   * @param  {number} t\n   * @return {Array.<number>}\n   */\n  tangentAt: function tangentAt(t) {\n    var p = someVectorAt(this.shape, t, true);\n    return vec2.normalize(p, p);\n  }\n});\n\nmodule.exports = _default;","map":{"version":3,"sources":["/home/johnatan/MP/mp-app/ap/node_modules/zrender/lib/graphic/shape/BezierCurve.js"],"names":["Path","require","vec2","_curve","quadraticSubdivide","cubicSubdivide","quadraticAt","cubicAt","quadraticDerivativeAt","cubicDerivativeAt","out","someVectorAt","shape","t","isTangent","cpx2","cpy2","x1","cpx1","x2","y1","cpy1","y2","_default","extend","type","percent","style","stroke","fill","buildPath","ctx","moveTo","quadraticCurveTo","bezierCurveTo","pointAt","tangentAt","p","normalize","module","exports"],"mappings":"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","sourcesContent":["var Path = require(\"../Path\");\n\nvar vec2 = require(\"../../core/vector\");\n\nvar _curve = require(\"../../core/curve\");\n\nvar quadraticSubdivide = _curve.quadraticSubdivide;\nvar cubicSubdivide = _curve.cubicSubdivide;\nvar quadraticAt = _curve.quadraticAt;\nvar cubicAt = _curve.cubicAt;\nvar quadraticDerivativeAt = _curve.quadraticDerivativeAt;\nvar cubicDerivativeAt = _curve.cubicDerivativeAt;\n\n/**\n * 贝塞尔曲线\n * @module zrender/shape/BezierCurve\n */\nvar out = [];\n\nfunction someVectorAt(shape, t, isTangent) {\n  var cpx2 = shape.cpx2;\n  var cpy2 = shape.cpy2;\n\n  if (cpx2 === null || cpy2 === null) {\n    return [(isTangent ? cubicDerivativeAt : cubicAt)(shape.x1, shape.cpx1, shape.cpx2, shape.x2, t), (isTangent ? cubicDerivativeAt : cubicAt)(shape.y1, shape.cpy1, shape.cpy2, shape.y2, t)];\n  } else {\n    return [(isTangent ? quadraticDerivativeAt : quadraticAt)(shape.x1, shape.cpx1, shape.x2, t), (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.y1, shape.cpy1, shape.y2, t)];\n  }\n}\n\nvar _default = Path.extend({\n  type: 'bezier-curve',\n  shape: {\n    x1: 0,\n    y1: 0,\n    x2: 0,\n    y2: 0,\n    cpx1: 0,\n    cpy1: 0,\n    // cpx2: 0,\n    // cpy2: 0\n    // Curve show percent, for animating\n    percent: 1\n  },\n  style: {\n    stroke: '#000',\n    fill: null\n  },\n  buildPath: function (ctx, shape) {\n    var x1 = shape.x1;\n    var y1 = shape.y1;\n    var x2 = shape.x2;\n    var y2 = shape.y2;\n    var cpx1 = shape.cpx1;\n    var cpy1 = shape.cpy1;\n    var cpx2 = shape.cpx2;\n    var cpy2 = shape.cpy2;\n    var percent = shape.percent;\n\n    if (percent === 0) {\n      return;\n    }\n\n    ctx.moveTo(x1, y1);\n\n    if (cpx2 == null || cpy2 == null) {\n      if (percent < 1) {\n        quadraticSubdivide(x1, cpx1, x2, percent, out);\n        cpx1 = out[1];\n        x2 = out[2];\n        quadraticSubdivide(y1, cpy1, y2, percent, out);\n        cpy1 = out[1];\n        y2 = out[2];\n      }\n\n      ctx.quadraticCurveTo(cpx1, cpy1, x2, y2);\n    } else {\n      if (percent < 1) {\n        cubicSubdivide(x1, cpx1, cpx2, x2, percent, out);\n        cpx1 = out[1];\n        cpx2 = out[2];\n        x2 = out[3];\n        cubicSubdivide(y1, cpy1, cpy2, y2, percent, out);\n        cpy1 = out[1];\n        cpy2 = out[2];\n        y2 = out[3];\n      }\n\n      ctx.bezierCurveTo(cpx1, cpy1, cpx2, cpy2, x2, y2);\n    }\n  },\n\n  /**\n   * Get point at percent\n   * @param  {number} t\n   * @return {Array.<number>}\n   */\n  pointAt: function (t) {\n    return someVectorAt(this.shape, t, false);\n  },\n\n  /**\n   * Get tangent at percent\n   * @param  {number} t\n   * @return {Array.<number>}\n   */\n  tangentAt: function (t) {\n    var p = someVectorAt(this.shape, t, true);\n    return vec2.normalize(p, p);\n  }\n});\n\nmodule.exports = _default;"]},"metadata":{},"sourceType":"script"}